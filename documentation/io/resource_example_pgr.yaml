resource:
	id: "bduni_j+1"
	type: "pgr"
	description: "Données BDUNI v2 mise à jour quotidiennement."
	topology:
    id: "base-bduni"
    type: "db"
		description: "Données issues de la BDUNI de l'IGN."
		projection: "EPSG:2154"
    bbox: "0,6000000,1300000,72000000"
    storage:
      base:
        dbConfig: "dbconfig.json"
        schema: "public"
        attributes:
          - key: "name"
            column: "ways_name"
            default: true
          - key: "type"
            column: "ways_type"
            default: false
            #le coût, la durée et la distance dépendent de la requête
          - key: "slope"
            column: "ways_slope"
            default: false
	sources:
		- id: "bduni-car-fastest"
      type: "pgr"
		  storage:
		    costColumn: "car_fastest_cost"
		    reverseCostColumn: "fcar_astest_reverse_cost"
		  cost:
		  	profile: "car"
		  	optimization: "fastest"
		  	compute:
		  		storage:
		  			file: "costs_calculation_cfastest.json"
        configuration:
          name: "cost_f_car"
          storage:
            file: "costs_calculation_cfastest.json"
		- id: "bduni-car-shortest"
      type: "pgr"
		  storage:
		    costColumn: "car_shortest_cost"
		    reverseCostColumn: "car_shortest_reverse_cost"
		  cost:
		  	profile: "car"
		  	optimization: "shortest"
		  	compute:
		  		storage:
		  			file: "costs_calculation_cfastest.json"
        configuration:
          name: "cost_s_car"
          storage:
            file: "costs_calculation_cfastest.json"
		- id: "bduni-bike-fastest"
      type: "pgr"
		  storage:
		    costColumn: "bike_fastest_cost"
		    reverseCostColumn: "bike_fastest_reverse_cost"
		  cost:
		  	profile: "bike"
		  	optimization: "fastest"
		  	compute:
		  		storage:
		  			file: "costs_calculation_bfastest.json"
        configuration:
          name: "cost_f_bike"
          storage:
            file: "costs_calculation_bfastest.json"
		- id: "bduni-bike-shortest"
      type: "pgr"
		  storage:
		    costColumn: "bike_shortest_cost"
		    reverseCostColumn: "bike_shortest_reverse_cost"
		  cost:
		  	profile: "bike"
		  	optimization: "shortest"
		  	compute:
		  		storage:
		  			file: "costs_calculation_bfastest.json"
        configuration:
          name: "cost_s_bike"
          storage:
            file: "costs_calculation_bfastest.json"
	availableOperations:
		- id: "route"
      parameters:
        - id: "resource"
          values:
            - "bduni_j+1"
        - id: "start"
          values:
            bbox: "-90,-180,90,180"
        - id: "end"
          values:
            bbox: "-90,-180,90,180"
        - id: "profile"
          values:
            - "car"
          defaultValueContent: "car"
        - id: "optimization"
          values:
            - "fastest"
            - "shortest"
          defaultValueContent: "fastest"
        - id: "intermediates"
          values:
            bbox: "-90,-180,90,180"
        - id: "getSteps"
          defaultValueContent: "true"
        - id: "waysAttributes"
          values:
            - "name"
        - id: "geometryFormat"
          defaultValueContent: "geojson"
          values:
            - "geojson"
            - "polyline"
        - id: "bbox"
          defaultValueContent: "true"
        - id: "projection"
          defaultValueContent: "EPSG:43260"
          values:
            - "EPSG:4326"
            - "EPSG:2154"
        - id: "timeUnit"
          defaultValueContent: "minute"
          values:
            - "hour"
            - "minute"
            - "second"
            - "standard"
        - id: "distanceUnit"
          defaultValueContent: "meter"
          values:
            - "meter"
            - "kilometer"
        - id: "constraints"
          values:
            - keyType: "name"
              key: "wayType"
              availableConstraintType:
                - "banned"
              availableValues:
                - value: "autoroute"
                  field: "acces_vehicule_leger"
                  condition:
                    type: "equal"
                    value: "A péage"
    - id: "isochrone"
      parameters:
        - id: "resource"
          values:
            - "bduni-idf-pgr"
        - id: "point"
          values:
            bbox: "-90,-180,90,180"
            projection: "EPSG:4326"
        - id: "costType"
          defaultValueContent: "time"
          values:
            - "time"
            - "distance"
        - id: "costValue"
          min: 10
        - id: "profile"
          defaultValueContent: "car"
          values:
            - "car",
            - "pedestrian"
        - id: "direction"
          defaultValueContent: "departure"
          values:
            - "departure"
            - "arrival"
        - id: "constraints"
          values:
            - keyType: "kvp"
              key: "wayType"
              id: "way_type"
              availableConstraintType:
                - "banned"
              availableValues:
                - value: "autoroute"
                  field: "autoroute"
